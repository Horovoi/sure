<div class="space-y-4 flex flex-col">
  <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
    <div>
      <h1 class="text-primary text-xl font-medium"><%= t(".title") %></h1>
      <% if @suggestions.any? %>
        <p class="text-secondary text-sm mt-1"><%= t(".description") %></p>
      <% end %>
    </div>

    <div id="suggestions_header_actions" class="flex items-center gap-2">
      <% if @suggestions.any? %>
        <%= button_to approve_all_suggestions_subscriptions_path, method: :post, class: "inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-success hover:bg-success/90 rounded-lg transition-colors" do %>
          <%= icon "check-circle", size: "sm", color: "white" %>
          <span><%= t(".approve_all") %></span>
        <% end %>
        <%= button_to dismiss_all_suggestions_subscriptions_path, method: :post,
            class: "inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-secondary bg-container border border-secondary hover:bg-surface-hover rounded-lg transition-colors",
            data: { turbo_confirm: t(".dismiss_all_confirm") } do %>
          <%= icon "x", size: "sm", color: "current" %>
          <span><%= t(".dismiss_all") %></span>
        <% end %>
      <% end %>
    </div>
  </header>

  <div id="suggestions_container" class="bg-container rounded-xl shadow-border-xs">
    <% if @suggestions.empty? && @dismissed_suggestions.empty? %>
      <%= render "subscriptions/suggestions_empty_state" %>
    <% else %>
      <div id="suggestions_list" class="divide-y divide-subdued <%= "empty:hidden" if @suggestions.empty? %>">
        <% @suggestions.each do |suggestion| %>
          <%= render "subscriptions/suggestion", suggestion: suggestion %>
        <% end %>
      </div>
      <% if @suggestions.empty? %>
        <div id="no_pending_suggestions" class="p-6 text-center">
          <p class="text-secondary text-sm"><%= t(".no_pending_suggestions") %></p>
        </div>
      <% end %>
    <% end %>
  </div>

  <%# Previously Dismissed Section (collapsible) %>
  <% if @dismissed_suggestions.any? %>
    <div id="dismissed_container">
      <%= render DS::Disclosure.new(
        title: t(".previously_dismissed", count: @dismissed_suggestions.count),
        align: :left,
        open: false
      ) do %>
        <div id="dismissed_list" class="bg-container rounded-xl shadow-border-xs divide-y divide-subdued">
          <% @dismissed_suggestions.each do |suggestion| %>
            <%= render "subscriptions/dismissed_suggestion", suggestion: suggestion %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
