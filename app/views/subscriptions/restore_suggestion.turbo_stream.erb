<%# Remove from dismissed list %>
<%= turbo_stream.remove "dismissed_suggestion_#{@suggestion.id}" %>

<%# Remove "no pending suggestions" message if present %>
<%= turbo_stream.remove "no_pending_suggestions" %>

<%# Prepend the restored suggestion to the list (empty:hidden class will auto-show it) %>
<%= turbo_stream.prepend "suggestions_list" do %>
  <%= render "subscriptions/suggestion", suggestion: @suggestion %>
<% end %>

<%# Show header actions (in case they were hidden) %>
<%= turbo_stream.update "suggestions_header_actions" do %>
  <%= button_to approve_all_suggestions_subscriptions_path, method: :post, class: "inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-success hover:bg-success/90 rounded-lg transition-colors" do %>
    <%= icon "check-circle", size: "sm", color: "white" %>
    <span><%= t("subscriptions.suggestions.approve_all") %></span>
  <% end %>
  <%= button_to dismiss_all_suggestions_subscriptions_path, method: :post,
      class: "inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-secondary bg-container border border-secondary hover:bg-surface-hover rounded-lg transition-colors",
      data: { turbo_confirm: t("subscriptions.suggestions.dismiss_all_confirm") } do %>
    <%= icon "x", size: "sm", color: "current" %>
    <span><%= t("subscriptions.suggestions.dismiss_all") %></span>
  <% end %>
<% end %>

<%# Remove dismissed section if empty %>
<% if @remaining_dismissed_count == 0 %>
  <%= turbo_stream.remove "dismissed_container" %>
<% end %>
