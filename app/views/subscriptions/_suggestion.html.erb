<div id="suggestion_<%= suggestion.id %>" class="p-4 flex items-center justify-between gap-4 hover:bg-surface-hover transition-colors">
  <div class="flex items-center gap-3 flex-1 min-w-0">
    <%# Logo with fallback for broken images %>
    <div class="relative w-10 h-10 flex-shrink-0">
      <% logo_url = suggestion.subscription_service&.logo_url || suggestion.merchant&.logo_url %>
      <% if logo_url.present? %>
        <%= image_tag logo_url,
            class: "w-10 h-10 rounded-full object-cover",
            loading: "lazy",
            onerror: "this.style.display='none'; this.nextElementSibling.style.display='flex';" %>
        <div style="display: none;">
          <%= render DS::FilledIcon.new(
            variant: :text,
            text: suggestion.display_name,
            size: "lg",
            rounded: true
          ) %>
        </div>
      <% else %>
        <%= render DS::FilledIcon.new(
          variant: :text,
          text: suggestion.display_name,
          size: "lg",
          rounded: true
        ) %>
      <% end %>
    </div>

    <%# Details %>
    <div class="min-w-0 flex-1">
      <div class="flex items-center gap-2">
        <span class="text-sm text-primary font-medium truncate"><%= suggestion.display_name %></span>
        <% if suggestion.subscription_service.present? %>
          <span class="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-50 text-success">
            Matched
          </span>
        <% end %>
      </div>
      <div class="flex items-center gap-3 text-xs text-secondary mt-0.5">
        <span class="font-medium text-primary">
          <%= format_money(-suggestion.amount_money) %>/<%= suggestion.billing_cycle_yearly? ? "yr" : "mo" %>
        </span>
        <span><%= t(".transaction_count", count: suggestion.occurrence_count || 1) %></span>
        <% if suggestion.category.present? %>
          <span><%= suggestion.category.name %></span>
        <% end %>
      </div>
    </div>
  </div>

  <%# Actions %>
  <div class="flex items-center gap-2 flex-shrink-0">
    <%= button_to approve_suggestion_subscription_path(suggestion), method: :post,
        class: "inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-success hover:bg-green-50 rounded-lg transition-colors" do %>
      <%= icon "check", size: "sm", color: "current" %>
      <span><%= t(".approve") %></span>
    <% end %>

    <%= button_to dismiss_suggestion_subscription_path(suggestion), method: :post,
        class: "inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-secondary hover:text-destructive hover:bg-red-50 rounded-lg transition-colors" do %>
      <%= icon "x", size: "sm", color: "current" %>
      <span><%= t(".dismiss") %></span>
    <% end %>
  </div>
</div>
