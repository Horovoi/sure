<%# locals: (budget:, previous_budget:, next_budget:, latest_budget:) %>

<div class="flex items-center gap-1 mb-4">
  <div class="flex items-center gap-2">
    <% if budget.previous_budget_param %>
      <%= render DS::Link.new(
        variant: "icon",
        icon: "chevron-left",
        href: budget_path(budget.previous_budget_param),
      ) %>
    <% else %>
      <span class="text-subdued">
        <%= icon "chevron-left", color: "current" %>
      </span>
    <% end %>

    <% if budget.next_budget_param %>
      <%= render DS::Link.new(
        variant: "icon",
        icon: "chevron-right",
        href: budget_path(budget.next_budget_param),
      ) %>
    <% else %>
      <span class="text-subdued">
        <%= icon "chevron-right", color: "current" %>
      </span>
    <% end %>
  </div>

  <%= render DS::Menu.new(variant: "button") do |menu| %>
    <% menu.with_button class: "flex items-center gap-1 hover:bg-alpha-black-25 cursor-pointer rounded-md p-2"  do %>
      <span class="text-primary font-medium text-base md:text-lg"><%= @budget.name %></span>
      <%= icon("chevron-down") %>
    <% end %>

    <% menu.with_custom_content do %>
      <%= render "budgets/picker", family: Current.family, year: budget.start_date.year %>
    <% end %>
  <% end %>

  <div class="ml-auto">
    <%= render DS::Link.new(
        text: "Today",
        variant: "outline",
        href: budget_path(Budget.date_to_param(Date.current, family: Current.family)),
    ) %>
  </div>
</div>

<div class="text-secondary text-xs mb-3">
  <span>Period:</span>
  <span class="text-primary">
    <%= @budget.start_date.strftime("%b %-d, %Y") %> â€” <%= @budget.end_date.strftime("%b %-d, %Y") %>
  </span>
  <% if Current.family.fiscal_month_enabled? %>
    <span class="ml-2 px-1.5 py-0.5 border border-tertiary rounded-md">Fiscal months</span>
  <% end %>
</div>
